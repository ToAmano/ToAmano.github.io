<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>K点 | personal website</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="K点" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/page/aiida/aiida_kpoints.html" />
<meta property="og:url" content="http://localhost:4000/page/aiida/aiida_kpoints.html" />
<meta property="og:site_name" content="personal website" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="K点" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"K点","url":"http://localhost:4000/page/aiida/aiida_kpoints.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=c90158fd34f66e4f63b4da45038b5d6170d798eb">
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    

<!--  -->

  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://localhost:4000/">personal website</a></h1>

        

        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>

        
        <p class="view"><a href="https://github.com/dirac6582/dirac6582.github.io.git">View the Project on GitHub <small>dirac6582/dirac6582.github.io.git</small></a></p>
        

        

        
      </header>
      <section>

      <h1 id="k点">K点</h1>

<p>https://aiida.readthedocs.io/projects/aiida-core/en/latest/topics/data_types.html?highlight=KpointsData#kpointsdata</p>

<h2 id="k点の自動サンプリング">K点の自動サンプリング</h2>

<h2 id="k点のパス"><a href="https://aiida.readthedocs.io/projects/aiida-core/en/latest/reference/apidoc/aiida.tools.data.array.kpoints.html#aiida.tools.data.array.kpoints.main.get_kpoints_path">K点のパス</a></h2>

<p>AiiDAは結晶構造を入力すると自動でK点を計算してくれるmethodを持つ．<code class="language-plaintext highlighter-rouge">aiida.tools.data.array.kpoints.main.get_kpoints_path() </code>と<code class="language-plaintext highlighter-rouge">aiida.tools.data.array.kpoints.main.get_explicit_kpoints_path()</code>という二つの手法を利用することができる．</p>

<p>These methods are also conveniently exported directly as, e.g., aiida.tools.get_kpoints_path.</p>

<p>これらの二つの手法の入力は同じだが出力が異なる．違いは前者が特殊K点を辞書方式で返すのに対して((e.g. {‘GAMMA’: [0. ,0. ,0. ], ‘X’: [0.5, 0., 0.], ‘L’: [0.5, 0.5, 0.5]}, and then a list of tuples of endpoints of each segment, e.g. [(‘GAMMA’, ‘X’), (‘X’, ‘L’), (‘L’, ‘GAMMA’)] for the  path.)，後者はpathに沿ったK点のリストを返す（[[0., 0., 0.], [0.05, 0., 0.], [0.1, 0., 0.], …].）</p>

<p>入力としてはまずStructureData形式の結晶構造，そしてK点を取得する方法（これはデフォルトの<code class="language-plaintext highlighter-rouge">seekpath</code>のままで特に問題ないと思う．），最後に追加のパラメータである．追加のパラメータはseekpathのものと同様なので，細かく設定したい場合はseekpathのdocumentationを参照するべし．</p>

<p>実際に使ってみる．<code class="language-plaintext highlighter-rouge">get_kpoints_path() </code>はhuman readableなK点のリストを返すので人間の目にわかりやすい．<code class="language-plaintext highlighter-rouge">get_explicit_kpoints_path()</code>の方はKpointsData形式で返ってくるので出力をそのままbuilderに渡すことができる．もちろんどのようなpathを取っているか目で確認することも可能．</p>

<pre><code class="language-python:get_explicit_kpoints_path.py"># 計算条件は構造だけを最適化構造から取得
first_calculation = orm.load_node(707)
structure=first_calculation.outputs.output_structure

# get KpointData
import aiida.tools.data.array.kpoints.seekpath 
test2=aiida.tools.data.array.kpoints.seekpath.get_explicit_kpoints_path(structure,{})
test2["explicit_kpoints"]

# どのようなpathを取っているか確認
print(test2["parameters"]["point_coords"])
print(test2["parameters"]["path"])
</code></pre>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># extract data in human readable form
</span><span class="n">test3</span><span class="o">=</span><span class="n">aiida</span><span class="p">.</span><span class="n">tools</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">array</span><span class="p">.</span><span class="n">kpoints</span><span class="p">.</span><span class="n">seekpath</span><span class="p">.</span><span class="n">get_kpoints_path</span><span class="p">(</span><span class="n">structure</span><span class="p">,{})[</span><span class="s">"parameters"</span><span class="p">]</span>
<span class="n">test3</span><span class="p">.</span><span class="nb">dict</span><span class="p">.</span><span class="n">path</span>
<span class="n">test3</span><span class="p">.</span><span class="nb">dict</span><span class="p">.</span><span class="n">point_coords</span>
</code></pre></div></div>

<p>参考
https://aiida.readthedocs.io/projects/aiida-core/en/latest/reference/apidoc/aiida.tools.data.array.kpoints.html?highlight=kpoints.seekpath#module-aiida.tools.data.array.kpoints.seekpath</p>

<p>https://aiida.readthedocs.io/projects/aiida-core/en/latest/topics/data_types.html?highlight=KpointsData#kpointsdata</p>


      </section>
      <footer>
        
        <p>This project is maintained by <a href="https://github.com/dirac6582">dirac6582</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="/assets/js/scale.fix.js"></script>
  </body>
</html>
