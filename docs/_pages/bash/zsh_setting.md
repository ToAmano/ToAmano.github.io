---
layout: single
title:  "zsh 設定ファイルの種類"
date:   2022-09-04 10:03:40 +0900
categories: bash zsh
---



## zshの設定ファイルの種類と読み込み順序

`.zshenv`, `.zprofile`, `.zshrc`, `.zlogin`の4つのファイルがあり，それぞれglobal（/etc/以下）とlocal（~/以下）にある．基本的にglobalの設定が読み込まれてからlocalの設定が読み込まれる．自分のPCをいじっている限りはlocalの設定のみいじれば良い．サーバー管理者となったらglobalの設定をいじることになる．localの設定場所は`$ZDOTDIR`で指定することも可能．

これらのファイルはzshの起動方法によって読み込まれるか否かが異なる．

- ログインシェルの場合（iterm2起動時,SSH,TMUX,SCREENなど含む）
    zshenv > zprofile > zshrc > zloginの順でそれぞれglobalを読み込んだ後でlocalを上書き読み込みする．
- インタラクティブシェルの場合（iterm2上でbashやzshと打った場合）
    zshenv > zshrc
- シェルスクリプト実行の場合
    zshenv
- ログアウト時（これだけはlocal→globalの順）
    zlogout

したがって，`.zshenv`には環境変数などシェルスクリプト実行時にも読み込む設定に絞って記述する．`.zprofile`はログインシェルの場合のみ実行される．インタラクティブシェルを積極的に使う場合以外はあまり使い道がないと思うので自分は利用していない．`.zshrc`は加えてインタラクティブシェルでも実行されるが，自分は設定は全てこちらに記述している．

結局のところ環境変数は`.zshenv`に，その他の設定は`.zshrc`に記述してその後のファイルは利用していない．

<!--
## zlogin
ログインシェルの場合だけ読み込まれる。
zprofileと一緒なのだが、重要なのはzshrcの後に読み込まれるということ。
ちなみにzprofileとzloginを一緒に使うことはあまり想定されていないらしい。
どちらか一方を使うイメージかな

## zlogout
シェルからexitする前に読み込まれる。
最後に定型的な処理をさせたい場合にはここに記述する。


## Zsh 設定ファイルTips
スクリプトが大きくなってきたらコンパイルしましょう
カスタマイズしていくとだんだんファイルが大きくなってきます。
ファイルが多く、とくにスクリプト系が増えると読み込みにも時間がかかってしまい快適さが失われてしまいます。

そんな時は、コンパイルをしましょう。

$ zcompile ~/.zshrc
これを実行すると.zshrc.zwcができます。
このファイルは、zshで自動的に読み取られるようになっています。

ファイル変更を完治して自動的にコンパイルすれば楽ちんですね。
-->



## 参考文献
https://qiita.com/muran001/items/7b104d33f5ea3f75353f
